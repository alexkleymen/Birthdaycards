{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Yaniv arad\\\\New Projects\\\\BirthDayCards\\\\client\\\\my-app\\\\src\\\\components\\\\EventContext.js\",\n    _s = $RefreshSig$();\n\nimport React, { Component, useEffect, useContext, useState, createContext } from 'react';\nimport { UserContext } from '../App';\nimport axios from 'axios';\nexport const EventContext = /*#__PURE__*/createContext();\n\nconst EventsContextProivder = props => {\n  _s();\n\n  const [events, setEvents] = useState([]);\n  const [user, setUser] = useContext(UserContext);\n  useEffect(() => {\n    axios.get('http://localhost:5000/event/').then(resp => {\n      let allEvents = resp.data;\n      let userEvent = allEvents.filter(event => event.user == user.id);\n      setEvents(userEvent);\n    });\n  }, [user]);\n\n  const updateevent = ({\n    name,\n    id\n  }) => {\n    let event = events.filter(event => event._id === id);\n    event = event[0];\n    debugger;\n    let index = events.findIndex(event => event._id === id);\n    event.name = name;\n    let allEvents = [...events];\n    allEvents.splice(index, 1, event);\n    setEvents(allEvents);\n    axios.put(\"http://localhost:5000/event/\" + id, {\n      \"name\": name\n    }).then(res => {\n      debugger;\n      console.log(res);\n    });\n  };\n\n  const addEvent = name => {\n    axios.post(\"http://localhost:5000/event/\" + user.id, {\n      \"name\": name\n    }).then(res => {\n      setEvents(events => [...events, res.data]);\n    });\n  };\n\n  const deleteEvent = id => {\n    let index = events.findIndex(event => event._id === id);\n    let newEvents = [...events];\n    newEvents = newEvents.slice(index, index + 1);\n    setEvents(newEvents);\n    axios.delete(\"http://localhost:5000/event/\" + id).then(res => {\n      console.log(res);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(EventContext.Provider, {\n    value: [events, setEvents, updateevent, addEvent, deleteEvent],\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 9\n  }, this);\n};\n\n_s(EventsContextProivder, \"TMKhpR/jBR5qD2qXENggHUH9lj0=\");\n\n_c = EventsContextProivder;\nexport default EventsContextProivder;\n\nvar _c;\n\n$RefreshReg$(_c, \"EventsContextProivder\");","map":{"version":3,"sources":["C:/Yaniv arad/New Projects/BirthDayCards/client/my-app/src/components/EventContext.js"],"names":["React","Component","useEffect","useContext","useState","createContext","UserContext","axios","EventContext","EventsContextProivder","props","events","setEvents","user","setUser","get","then","resp","allEvents","data","userEvent","filter","event","id","updateevent","name","_id","index","findIndex","splice","put","res","console","log","addEvent","post","deleteEvent","newEvents","slice","delete","children"],"mappings":"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","sourcesContent":["import React, { Component,useEffect,useContext,useState,createContext } from 'react';\r\nimport {UserContext} from '../App'\r\n\r\nimport axios from 'axios'\r\n\r\n\r\n\r\nexport const EventContext = createContext()\r\n\r\n\r\nconst EventsContextProivder = (props) => {\r\n\r\n    const [events,setEvents] = useState([])\r\n    const [user,setUser] = useContext(UserContext)\r\n \r\nuseEffect(()=>{\r\n    \r\n    axios.get('http://localhost:5000/event/').then(resp=>{\r\n        let allEvents = resp.data;\r\n        let userEvent = allEvents.filter(event=>event.user == user.id)\r\n        setEvents(userEvent)\r\n        \r\n        \r\n    })\r\n\r\n},[user])\r\n\r\nconst updateevent = ({name,id}) => { \r\n    let event = events.filter(event=>event._id===id)\r\n    event = event[0]\r\n    debugger\r\n    let index = events.findIndex(event=>event._id===id)\r\n    event.name = name;\r\n    let allEvents = [...events]\r\n    allEvents.splice(index,1,event)\r\n    setEvents(allEvents)\r\n    axios.put(\"http://localhost:5000/event/\" + id ,{\r\n        \"name\" : name\r\n    }).then(res=>{\r\n        debugger\r\n        console.log(res)\r\n    })\r\n}\r\n\r\n\r\nconst addEvent = (name) =>{\r\n\r\n    \r\n   \r\n    axios.post(\"http://localhost:5000/event/\" + user.id,{\r\n        \"name\": name\r\n    }).then(res=>{\r\n        \r\n        setEvents(events=>[...events,res.data])\r\n    })\r\n}\r\n\r\n\r\nconst deleteEvent = (id) =>{\r\n    let index = events.findIndex(event=>event._id===id)\r\n    let newEvents = [...events]\r\n    newEvents = newEvents.slice(index,index+1)\r\n    setEvents(newEvents)\r\n    axios.delete(\"http://localhost:5000/event/\" + id)\r\n    .then(res=>{\r\n        console.log(res)\r\n    })\r\n}\r\n\r\n\r\n    return  ( \r\n       \r\n        <EventContext.Provider value={[events,setEvents,updateevent,addEvent,deleteEvent]}>\r\n            {props.children}\r\n        </EventContext.Provider>\r\n        \r\n      \r\n     ) \r\n}\r\n \r\nexport default EventsContextProivder;"]},"metadata":{},"sourceType":"module"}